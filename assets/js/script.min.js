/* ///////////////////////////////////
//// author: Lukas Jakob Hafner //////
//// company: booncon oy /////////////
//// date: 2012/12/17 ////////////////
//// version: 1.2 ////////////////////
/////////////////////////////////// */

//packed with http://dean.edwards.name/packer/
var anim_dur,url_divider;anim_dur=400;url_divider=' ‚óè ';function resizeFizzy($container){var fizzy_width,per_row;if($container.width()<=500){per_row=2}else{per_row=4}fizzy_width=($container.width()/per_row)-parseInt($('.fizzy').css('marginLeft'))-parseInt($('.fizzy').css('marginRight'));$('.fizzy').css('maxWidth',fizzy_width);$container.isotope('reLayout')}function resizeSlider(){var img_y,window_height;window_height=$(window).height();if((navigator.userAgent.match(/iPhone/i)!==null)||(navigator.userAgent.match(/iPod/i)!==null)){window_height+=60}$('#slide_wrapper').height(window_height);$(".explode").show();img_y=window_height-$('.project_meta').outerHeight();if(!$(".explode").hasClass('open')){$(".explode").hide()}$('.wallpaper').height(img_y).trigger('change')}function scrollSmooth(position){$('html,body').animate({scrollTop:position},anim_dur)}function initUI(){$('.main_menu a').click(function(){_gaq.push(['_trackPageview',this.hash]);scrollSmooth($(this.hash).offset().top);return false});if((navigator.userAgent.match(/iPad/i)==null)&&(navigator.userAgent.match(/iPhone/i)==null)&&(navigator.userAgent.match(/iPod/i)==null)){$('#top-link').topLink({min:600,fadeSpeed:anim_dur});$('#top-link').click(function(e){e.preventDefault();scrollSmooth(0)})}$('.tools').click(function(e){e.preventDefault();scrollSmooth($('#projects').offset().top)});$('.header_logo').click(function(){$.bbq.removeState();location.reload()});$('.message_status').delay(8000).hide("blind",{direction:"vertical"},anim_dur);$('.retina').retina();$('.tech_toggle').tipsy({gravity:'s'}).click(function(){return false})}function initFizzy($container){$container.imagesLoaded(function(){$container.isotope({resizable:false,animationOptions:{duration:anim_dur,easing:'linear',queue:false}});resizeFizzy($container);$('#fizzy_filters li').click(function(){$('#fizzy_filters li').removeClass('active');$(this).addClass('active');var selector=$(this).attr('data-filter');$container.isotope({filter:selector});return false})})}function setTitle(title){document.title=title}function initKeyHandler(){$(document).unbind('keydown').bind('keydown',function(e){var code,no_key;code=(e.keyCode?e.keyCode:e.which);no_key=false;switch(code){case 27:$('.close').trigger('click');break;case 37:$('.wmuSliderPrev').trigger('click');break;case 39:$('.wmuSliderNext').trigger('click');break;case 32:$('.wmuSliderNext').trigger('click');break;case 38:$('.prev_proj').trigger('click');break;case 40:$('.next_proj').trigger('click');break;default:no_key=true;break}if(!no_key){e.preventDefault()}});$('.wallpaper').click(function(){$('.wmuSliderNext').trigger('click')})}function closeSlider(){if($('.explode:visible').length>0){$('.explode').removeClass('open').hide("blind",{direction:"vertical"},anim_dur,function(){$('.fizzy').removeClass('active');setTitle($('#page_title').val());$(document).unbind('keydown')})}}function loadProject(url){_gaq.push(['_trackPageview',url]);$('.explode').load(url+' #slide_wrapper',function(){var img_y,cur_proj,count_proj,next_proj,prev_proj,loop_proj;count_proj=0;prev_proj,loop_proj,next_proj,cur_proj=null;$('.fizzy:not(.isotope-hidden)').each(function(){count_proj+=1;if((cur_proj!==null)&&(next_proj===undefined)){next_proj=$(this)}if($(this).hasClass('active')){prev_proj=loop_proj;cur_proj=count_proj}loop_proj=$(this)});if(next_proj===undefined){$('.next_proj').addClass('inactive')}if(prev_proj===undefined){$('.prev_proj').addClass('inactive')}initKeyHandler();setTitle($('#page_title').val()+url_divider+$('#project_title').val());$('.cur_proj').text(cur_proj);$('.count_proj').text(count_proj);$(this).addClass('open');resizeSlider();$('.explode').show("blind",{direction:"vertical"},anim_dur,function(){scrollSmooth($('#project_wrapper').offset().top+6)});$('.wmuSlider').wmuSlider({animation:'slide',slideshow:false,items:1});$('.close').click(function(){$.bbq.pushState({show:'none'});return false});$('.next_proj:not(.inactive)').click(function(){$('.showcase_block',next_proj).trigger('click');return false});$('.prev_proj:not(.inactive)').click(function(){$('.showcase_block',prev_proj).trigger('click');return false})})}function projectPreloader(url){if($('.explode.open').length===0){$('.explode').empty();loadProject(url)}else{$('html,body').animate({scrollTop:$('#project_wrapper').offset().top+6},anim_dur,function(){$('.explode').hide("blind",{direction:"vertical"},anim_dur,function(){$(this).empty();loadProject(url)})})}}function initShowcase(){$('.showcase_block').click(function(){var ajax_url,slider_is_close;slider_is_close=false;ajax_url=$(this).data('url');$.bbq.pushState({show:ajax_url});$('.fizzy').removeClass('active');$(this).closest('.fizzy').addClass('active');return false})}function initJQ(){var $container;$.ajaxSetup({cache:false});$container=$('.metafizzy');initUI();initFizzy($container);initShowcase();$(window).smartresize(function(){resizeFizzy($container);resizeSlider();if($('.explode.open').length>0){scrollSmooth($('#project_wrapper').offset().top+6)}});$(window).bind("hashchange",function(e){var url,hash;url=e.getState("show");if(url){if(url!=='none'){hash=location.hash.split('=')[1];$('.showcase_block').each(function(){var that=$(this);var t_href=that.data('url');that.closest('.fizzy')[t_href===hash?'addClass':'removeClass']('active')});projectPreloader(url)}else{closeSlider()}}else{closeSlider()}});$(window).trigger("hashchange")}